<body>
<!-- 11/26/2017 jchoy v0.143 tshelper.cb; gwClient -->

<div id='gwrig'> test gateway - a -
  <a href=# onclick="gr().runtest()">Run test</a>
</div>
<div style="display:block">
  <iframe src="http://192.168.1.25:8081/ws/gateway.html"
    id="gw"></iframe>
</div>

</body>
<script src="js/gateway.js"></script>
<script>
gr= function(){
  const D= document;
  const gwe= D.getElementById('gw');
  var isBusy= false;
  function runtest(){
      if (isBusy) return;
      isBusy= true;
      gwClient(gwe.contentWindow).get
        ('A1001', handler);
  }
  function handler(data){
      isBusy= false;
      D.body.appendChild
        (D.createElment('div')
        ).innerHTML= data;
  }
  return {runtest:runtest}
}
</script>
